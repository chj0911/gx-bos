var closeFindUserRuleForCategory=function(){var c=$("#myUserRuleTable"),h;var g=$("#findUserRuleId").val(),a=$("#findUserRuleType").val(),e=$("#findUserRuleParentTableId").val();var d=c.DataTable().selectedRows();if(!d||d.length==0){ModalBox.alert("请选择一条数据");return}var j=new Array();for(var f=0;f<d.length;f++){j.push(d[f].id)}var b=base+"/admin";if(a=="category"){b=b+"/infocenter/"+a+"/saveUserRule";h={relationIds:j,id:g}}$.ajax({type:"post",url:b,data:JSON.stringify(h),dataType:"json",contentType:"application/json;charset=utf-8",success:function(i){$("#findUserRuleForCategory").modal("hide");if(e){$("#div-"+e).show();$("#"+e).DataTable().ajax.reload()}}})};$(function(){var c=[];var b=$("#findUserRuleType").val();var a=$("#myUserRuleTable");$("#findUserRuleForCategory").on("show.bs.modal",function(){a.DataTable().ajax.url(base+"/admin/usercenter/rule/nosearch").load();$.getJSON(base+"/admin/usercenter/rule/searchUserRuleType",function(e){var f=e.returnObject;for(var d=0;d<f.length;d++){c.push({id:f[d].id,text:f[d].name,data:f[d],parent:(f[d].parentId?f[d].parentId:"#")})}$("#userrule_jstree_group").jstree({core:{data:c}});$("#userrule_jstree_group").on("loaded.jstree",function(h,g){$("#userrule_jstree_group").jstree("open_all")});$("#userrule_jstree_group").on("changed.jstree",function(h,g){a.DataTable().ajax.url(base+"/admin/usercenter/rule/userrule/search?typeParentId="+g.node.data.id+"&assignType="+b+"&assignId="+$("#findUserRuleId").val()).load()})})})});