var saveFoundGroup=function(){var selectedRows=$("#group_multiselect_to option");if(!selectedRows||selectedRows.length==0){ModalBox.alert("请选择一条数据");return}if($("#findGroupSaveUrl").val()){var param={};if($("#findGroupGetSubmitParam").val()){var parameters=new Array();for(var i=0;i<selectedRows.length;i++){var item={value:selectedRows[i].value,name:selectedRows[i].text};parameters.push(item)}param=eval($("#findGroupGetSubmitParam").val()).call(null,parameters)}else{var groupList=new Array();for(var i=0;i<selectedRows.length;i++){groupList.push(selectedRows[i].value)}param={id:$("#findGroupId").val(),groupIds:groupList}}$.ajax({type:"post",url:base+"/admin"+$("#findGroupSaveUrl").val(),data:JSON.stringify(param),dataType:"json",contentType:"application/json;charset=utf-8",success:function(response){var parentTableId=$("#findGroupParentTableId").val();if(parentTableId){$("#findGroup").modal("hide");$("#div-"+parentTableId).show();$("#"+parentTableId).DataTable().ajax.reload()}}})}else{if($("#findGroupCallback").val()){var param=new Array();for(var i=0;i<selectedRows.length;i++){var item={value:selectedRows[i].value,name:selectedRows[i].text};param.push(item)}eval($("#findGroupCallback").val()).call(null,param);$("#findGroup").modal("hide")}}};$(function(){var a=[];$("#findGroup").on("show.bs.modal",function(){$.getJSON(base+"/admin/usercenter/group/findUserGroups",function(d){var b=d.returnObject;for(var c=0;c<b.length;c++){a.push({id:b[c].id,text:b[c].groupName,data:b[c],parent:(b[c].parentId?b[c].parentId:"#")})}$("#usergroup_jstree_group").jstree({core:{data:a}});$("#usergroup_jstree_group").on("loaded.jstree",function(g,f){$("#usergroup_jstree_group").jstree("open_all")});$("#usergroup_jstree_group").on("changed.jstree",function(k,h){var m=$("#group_multiselect_to option");var f=new Array();for(var g=0;g<m.length;g++){f.push(m[g].value)}$("#group_multiselect").empty();var j=$("#group_multiselect");var l="";var n=h.node.data.dealerGroupResults;for(var g=0;g<=n.length-1;g++){if(!containsGroupId(f,n[g].id)){l+="<option value='"+n[g].id+"'>"+n[g].groupName+"</option>"}}j.append(l)})});$("#group_multiselect").multiselect()})});function containsGroupId(b,d){var c=b.length;while(c--){if(b[c]==d){return true}}return false}$(function(){var a=[];$("#findGroup").on("show.bs.modal",function(){$.getJSON(base+"/admin/usercenter/group/findSelectedGroups?module="+$("#module").val()+"&id="+$("#findGroupId").val(),function(e){var c=e.returnObject;var b=new Array();for(var d=0;d<c.length;d++){if(d==0){$("#group_multiselect_to").empty()}var f="<option value='"+c[d].id+"'>"+c[d].groupName+"</option>";b.push(f)}$("#group_multiselect_to").append(b)});$("#group_multiselect_to").multiselect()})});