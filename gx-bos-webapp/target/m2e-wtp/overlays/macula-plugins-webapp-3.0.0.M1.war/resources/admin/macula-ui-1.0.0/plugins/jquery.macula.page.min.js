(function(b,c){var a=1000;b.maculapage=function(h){var g={getMid:function(j){if(b.isFunction(decodeURIComponent)){j=decodeURIComponent(j)}var l=0,k=j.slice(j.indexOf("?")+1).split("&");for(var m=0;m<k.length;m++){var n=k[m].split("=");if(n[0]==="_mid"){l=n[1];break}}return l},setMid:function(i,j){return(i.indexOf("?")>0)?i+"&_mid="+j:i+"?_mid="+j}};if(window.opener!=null&&window.opener!=window){b("form").live("closeDialog",function(i){window.close()})}b.history.init(function(j){if(j){var i=g.getMid(j);e(j,i,0)}});function e(o,k,q){if(q>10){return}if(!PageContext.page_top_menu_loaded){setTimeout(function(){e(o,k,q++)},1500)}else{LAYOUT.top_menu.updatemenu(k);if(b.isFunction(decodeURIComponent)){o=decodeURIComponent(o)}if(o.indexOf("&mode=")>=0){var p="normal",j=o.slice(o.indexOf("?")+1).split("&");for(var l=0;l<j.length;l++){var n=j[l].split("=");if(n[0]==="mode"){p=n[1];break}}if(p!=="iframe"&&p!=="open"){if(o.indexOf("://")>=0){if(o.indexOf(document.location.protocol+"//"+document.location.host)<0){p="iframe"}}}if(p==="iframe"){var m='<div id="content-head" class="content-head"></div>';m+='<div id="main" class="content-main"><div class="loading" style="height:100%;overflow:hidden;"><iframe width="100%" height="100%" frameborder="0" allowtransparency="true" onload="this.parentNode.className=\'\';" src="'+o+'"></iframe></div></div>';m+='<div id="content-foot" class="content-foot"></div>';b(document.body).updateHtml(m,false);b(window).trigger("resize");return}if(p==="open"){window.open(o)}else{b(document.body).updateContents(o)}}else{b(document.body).updateContents(o)}}}function f(k,j){if(k.indexOf("://")>=0){return k}if(k.charAt(0)!="/"){k="/"+k}var i=(j||base);return k.startWith(i)?k:i+k}b(document.body).click(function(r){var l=b(r.target),q=0;while(!l.attr("href")&&q++<3&&(l=l.parent())){}if(l.size()<1||l.is(":disabled")){return false}var u=l.attr("_mid")||l.attr("mid")||PageContext.page_selected_menu;var s=l.attr("target"),k=l.attr("href"),j=l.attr("url");if(!s||!k){return true}if(!j||!k.match(/^javascript.+/i)){return true}var p=s,n={};if(s.match(/::/)){var o=s.split("::");p=o[0],n=JSON.decode(o[1]||"{}")}var t=function(v){if(n.callback&&b.isFunction(n.callback)){n.callback(v)}if(n.trigger){l.trigger(n.trigger,[v])}};switch(p){case"_blank":case"blank":b.openWindow(f(j||k,l.getContextPath()),n.title||"",n.width||-1,n.height||-1);break;case"menu":b("#side-r").trigger("hiderightpanel");var i=n.openMode||"normal";b.history.load(f(g.setMid(j||k,u)+"&mode="+i+"&t="+new Date().getTime(),l.getContextPath()),n);break;case"dialog":var m=null;m=new b.dialog(b.extend({id:"-page-dialog-"+(++a),html:true,cover:true,autoSize:true,rang:true,btnBar:false,iconTitle:false,dgOnLoad:function(){mAjax(b.extend({url:f(j,l.getContextPath()),success:function(v){m.updateContent(v);t(v)}},n))}},n));m.ShowDialog();break;case"update":b(n.container||document.body).updateContents(f(j,l.getContextPath()),n,t);break;case"replace":b(n.container||document.body).replaceContents(f(j,l.getContextPath()),n,t);break;case"command":if(n.trigger==null){n.trigger="onCommand"}mAjax(b.extend({url:f(j,l.getContextPath()),type:"post",dataType:"json",success:function(v){t(v)}},n));break}return false}).mouseover(function(i){if(b(i.target).attr("title")){window.status=b(i.target).attr("title")}});if(h&&window.location.href.indexOf("#")==-1){b.history.load(h)}};function d(l){var i=l||window.event;var k=i.target||i.srcElement;var h=k.type||k.getAttribute("type");var j=k.getAttribute("readonly");var m=k.getAttribute("enabled");j=(j==null)?false:j;m=(m==null)?true:m;var g=(i.keyCode==8&&(h=="password"||h=="text"||h=="textarea")&&(j==true||m!=true))?true:false;var f=(i.keyCode==8&&h!="password"&&h!="text"&&h!="textarea")?true:false;if(f){return false}if(g){return false}}document.onkeypress=d;document.onkeydown=d})(jQuery);