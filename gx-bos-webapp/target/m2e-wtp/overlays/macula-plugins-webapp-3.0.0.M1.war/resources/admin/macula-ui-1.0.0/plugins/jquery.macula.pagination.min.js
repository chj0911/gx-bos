(function(a,b){a.fn.maculapagination=function(e){var i=a(this),l=0,d=0,t=a.extend({curClass:"current",pageClass:"pagernum",nextBtn:"next",preBtn:"prev",pageMainClass:"pager",data_send_event:"_data_send_.",data_arrive_event:"_data_arrive_.",summaryHtml:a.template(null,"共${total}条记录,当前页:${startPos}-${endPos}条")},e||{});var s=function(){var v=[13,48,49,50,51,52,53,54,55,56,57,8,9,46,37,39];i.find("input[type=text]:first").keypress(function(y){if(y.shiftKey||a.inArray(y.which,v)<0){y.preventDefault();return}if(y.which==13){var x=parseInt(a(this).val());var w=c();x=Math.min(Math.max(0,isNaN(x)?1:x),w);m(x);a(this).val(x);this.select()}});var u=i.find(".finder-pageset-handle"),o=a("#"+u.attr("dropmenu"));i.find("input[type=radio]").click(function(){u.html(a(this).next("label").text());m(null,a(this).val())});u.parent().hover(function(){u.addClass("active");var w=u.position();o.css({left:w.left,top:w.top-o.outerHeight()+1}).showme()},function(){u.removeClass("active");o.hideme()});a(document.body).bind(t.code+t.data_arrive_event+t.code,function(x,w){g({total:w.totalElements,pageSize:w.size,currentPage:w.number+1})})};var g=function(w){t=a.extend(t,w||{});var u=t.pageSize,v=t.currentPage;l=u*(v-1)+1;d=u*v;h();q();n();j()},h=function(){var v=t.pageMainClass,u=t.pageClass;var o=i.find("."+v+" ."+u);o.html(f()+r()+p())},q=function(){i.find("td:last").html(a.tmpl(t.summaryHtml,{total:t.total,startPos:Math.min(l,t.total),endPos:Math.min(d,t.total)}))},n=function(){var o=i.find(".finder-pageset-handle");i.find("input[type=radio]").each(function(){if(parseInt(a(this).val())==t.pageSize){a(this).attr("checked",true);o.html(a(this).next("label").text())}})},j=function(){i.find("."+t.pageClass+">span:not(.current)").click(function(u){var o=t.currentPage;if(a(this).hasClass(t.nextBtn)){o+=1}else{if(a(this).hasClass(t.preBtn)){o-=1}else{o=parseInt(a(this).text())}}m(o)})},m=function(w,u){var v=w||t.currentPage,o=u||t.pageSize;if(v>c()||(v-1)*o>t.total){v=1}a(document.body).trigger(t.code+t.data_send_event+t.code,[{pageSize:o,currentPage:v}])},r=function(){var o=[],u=c(),v=parseInt(t.currentPage);if(u<2){}else{if(u<11){o.push(k(1,u))}else{if(u-v<8){o.push(k(1,3));o.push(k(u-8,u))}else{if(v<10){o.push(k(1,Math.max(v+3,10)));o.push(k(u-1,u))}else{o.push(k(1,3));o.push(k(v-2,v+3));o.push(k(u-1,u))}}}}return o.join("...")},k=function(x,w){var u=[];for(var v=x,o=w+1;v<o;v++){t.currentPage==v?u.push('<span class="'+t.curClass+'">'+v+"</span>"):u.push("<span>"+v+"</span>")}return u.join(" ")},p=function(){return c()>t.currentPage?'<span class="'+t.nextBtn+'">»</span>':"&nbsp;"},f=function(){return(t.total>0&&t.currentPage>1)?'<span class="'+t.preBtn+'">«</span>':"&nbsp;"},c=function(){return parseInt(t.total/t.pageSize)+(t.total%t.pageSize==0?0:1)};s()}})(jQuery);