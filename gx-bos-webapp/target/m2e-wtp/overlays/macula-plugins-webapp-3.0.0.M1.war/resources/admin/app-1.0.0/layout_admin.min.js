var LAYOUT={};var PageContext={page_top_menu_loaded:false,page_selected_menu:0};$(function(){LAYOUT={head:$("#header"),container:$("#container"),top_menu:$("#top_menu"),side:$("#side"),side_content:$("#side-content"),workground:$("#workground"),content_main:$("#main"),content_head:$("#content-head"),content_foot:$("#content-foot"),side_r:$("#side-r"),side_r_content:$("#side-r-content"),leftToggler:$("#leftToggler"),select_mid:0};$("#loadpart").hideme().remove();$("#body").showme();return initDesktop()});var initDesktop=function(){var a=function(){var e=$(window).width();var d=$(window).height();var g=d-LAYOUT.head.outerHeight();var i=LAYOUT.container.patchHeight();var c=0;if(!LAYOUT.side.hasClass("hide")){LAYOUT.side.width(e*0.12);c=LAYOUT.side.outerWidth(true)}var f=0;if(!LAYOUT.leftToggler.hasClass("hide")){f=LAYOUT.leftToggler.outerWidth(true)}var h=0;if(!LAYOUT.side_r.hasClass("hide")){LAYOUT.side_r.width(e*0.17);LAYOUT.side_r_content.height(g-LAYOUT.side_r.find(".side-r-top").outerHeight(true)-LAYOUT.side_r.find(".side-r-head").outerHeight(true)-LAYOUT.side_r.find(".side-r-foot").outerHeight(true)-LAYOUT.side_r.patchHeight()-LAYOUT.side_r_content.patchHeight());h=LAYOUT.side_r.outerWidth(true)}LAYOUT.container.height(g-i);LAYOUT.container.width(e.limit(960,2000));LAYOUT.content_main.height(LAYOUT.container.height()-LAYOUT.content_head.outerHeight(true)-LAYOUT.content_foot.outerHeight(true)-LAYOUT.workground.patchHeight());LAYOUT.workground.width(e-c-f-LAYOUT.workground.patchWidth()-h-2);LAYOUT.content_main.width(LAYOUT.workground.width())};$(document.body).ajaxStart(function(){MessageBox.error("正在加载...");if(!$(this).isMasked()){$(this).mask("正在加载...")}}).ajaxStop(function(){MessageBox.tip("加载完成...",true);$(this).unmask()});var b=0;$(window).resize(function(){clearTimeout(b);b=setTimeout(a,100)});LAYOUT.leftToggler.click(function(){if($(this).hasClass("fixed")){return}LAYOUT.side.toggleClass("hide");var c="desktop_"+CURRENTUSER+"_sideleft";if(!LAYOUT.side.hasClass("hide")){$.cookie(c,null)}else{$.cookie(c,"OFF-SHOW",{expires:365})}$(this).trigger("onLeftTogglerChange");$(window).trigger("resize")});LAYOUT.leftToggler.bind("onLeftTogglerChange",function(){if(LAYOUT.side.hasClass("hide")){LAYOUT.leftToggler.find(".toggler-left-inner").addClass("hide")}else{LAYOUT.leftToggler.find(".toggler-left-inner").removeClass("hide")}}).trigger("onLeftTogglerChange");if($("#favor").exists()){$("#favor").hover(function(){$(this).addClass("favor-active");var d=$(this).find(".x-drop-menu"),g=$(this).find(".favor-handle")[0].offsetHeight,c=$(window).height()-g;d.css({top:g-1,left:0}).show();if(c<=d[0].offsetHeight){var f=$(this).find(".x-edit-menu"),e=c-d.patchHeight();d.height(e).find("ul").css({"overflow-y":"auto",height:e-f[0].offsetHeight}).hide()}},function(){$(this).removeClass("favor-active");$(this).find(".x-drop-menu").hide()});(function(){var c=$("#favor > .x-drop-menu").hide();c.width($(window).width()-$("#favor").position().left-c.patchWidth()-7)})()}$(window).trigger("resize")};var MessageBox=(function(){var c=$("#messagebox"),b=null;var d="warning default",a=this;this.showMessage=function(g,f,e){if(b){clearTimeout(b);b=null}c.html(g).removeClass(d).addClass(f);if(e){b=setTimeout(function(){c.removeClass(f)},1500)}};return{error:function(f,e){a.showMessage(f,"warning",e)},info:function(f,e){a.showMessage(f,"default",e)},tip:function(f,e){if(b==null){a.showMessage(f,"default",e)}}}})();