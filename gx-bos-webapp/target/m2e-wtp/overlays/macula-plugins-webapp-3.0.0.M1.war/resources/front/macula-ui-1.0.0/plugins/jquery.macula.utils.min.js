Date.prototype.setISO8601=function(b){if(!b){return}var c="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):?([0-9]{2})))?)?)?)?";var f=b.match(new RegExp(c));var e=0;var a=new Date(f[1],0,1);if(f[3]){a.setMonth(f[3]-1)}if(f[5]){a.setDate(f[5])}if(f[7]){a.setHours(f[7])}if(f[8]){a.setMinutes(f[8])}if(f[10]){a.setSeconds(f[10])}if(f[12]){a.setMilliseconds(Number("0."+f[12])*1000)}if(f[14]){e=(Number(f[16])*60)+Number(f[17]);e*=((f[15]=="-")?1:-1)}e-=a.getTimezoneOffset();time=(Number(a)+(e*60*1000));this.setTime(Number(time))};Number.prototype.limit=function(b,a){return(this<b)?b:(this>a?a:this)};Number.prototype.split=function(){return[this]};String.prototype.endWith=function(a){if(a==null||a==""||this.length==0||a.length>this.length){return false}if(this.substring(this.length-a.length)==a){return true}else{return false}return true};String.prototype.startWith=function(a){if(a==null||a==""||this.length==0||a.length>this.length){return false}if(this.substr(0,a.length)==a){return true}else{return false}return true};String.prototype.length2=function(){var a=this.match(/[^\x00-\xff]/ig);return this.length+(a==null?0:a.length)};Array.prototype.makeLineTree=function(j){var c=j||{},b=c.id||"id",k=c.pid||"pid",f=c.order||"ordered";function e(o){var i=this;i.origin=o;i.getKey=function(){if(i.key){return i.key}i.key=[];i.key.push(l(i.origin));i.key.push(d(i.origin));if(i.parent){var q=i.parent.getKey();for(var p=q.length-1;p>=0;p--){i.key.unshift(q[p])}}return i.key};i.compare2=function(p){var t=i.getKey(),u=p.getKey(),q=Math.min(t.length,u.length);for(var r=0;r<q;r++){if(typeof(t[r])=="undefined"||typeof(u[r])=="undefined"){break}if(t[r]!=u[r]){var s=(t[r]+"").length-(u[r]+"").length;return s==0?(t[r]>u[r]?1:-1):(s>0?1:-1)}}return t.length>u.length?1:-1}}function d(i){if(typeof(b)=="function"){return b(i)||0}return i[b]||0}function a(i){if(typeof(k)=="function"){return k(i)||0}return i[k]||0}function l(i){if(typeof(f)=="function"){return f(i)||0}return i[f]||0}var h=[];for(var g=0;g<this.length;g++){var n=this[g];if(n!=null){h["$"+d(n)]=new e(n)}}for(var g=0;g<this.length;g++){var n=this[g];if(n!=null){h["$"+d(n)].parent=h["$"+a(n)]}}return this.sort(function(i,o){return h["$"+d(i)].compare2(h["$"+d(o)])})};Array.prototype.makeLevelTree=function(j){var c=j||{},b=c.id||"id",k=c.pid||"pid",f=c.order||"ordered";function e(o){var i=this;i.origin=o;i.getKey=function(){if(i.key){return i.key}i.key=[];i.key.push(q(i.origin));i.key.push(d(i.origin));if(i.parent){var t=i.parent.getKey();for(var s=t.length-1;s>=0;s--){i.key.unshift(t[s])}}return i.key};i.compare2=function(s){var w=i.getKey(),x=s.getKey(),t=Math.min(w.length,x.length);for(var u=0;u<t;u++){if(typeof(w[u])=="undefined"||typeof(x[u])=="undefined"){break}if(w[u]!=x[u]){var v=(w[u]+"").length-(x[u]+"").length;return v==0?(w[u]>x[u]?1:-1):(v>0?1:-1)}}return w.length>x.length?1:-1}}function d(i){if(typeof(b)=="function"){return b(i)||0}return i[b]||0}function a(i){if(typeof(k)=="function"){return k(i)||0}return i[k]||0}function q(i){if(typeof(f)=="function"){return f(i)||0}return i[f]||0}var h=[],l=[],n=[];for(var g=0;g<this.length;g++){var r=this[g];if(r!=null){r.children=[];h["$"+d(r)]=new e(r)}}for(var g=0;g<this.length;g++){var r=this[g];if(r!=null){var p=h["$"+a(r)];if(p){h["$"+d(r)].parent=p;r.parent=p.origin}l.push(r)}}l.sort(function(i,o){return h["$"+d(i)].compare2(h["$"+d(o)])});for(var g=0;g<l.length;g++){var r=l[g];if(r.parent){r.parent.children.push(r)}else{n.push(r)}}return n};function getContextPath(a){if(typeof(a)=="undefined"){return base}return $(a).getContextPath()||base}var mAjax,qAjax;(function(b,c){b.joinMap=function(f,e){var d="";b.each(f,function(g,h){if(typeof(g)=="string"&&typeof(h)=="string"){d+=g+"="+h+e}});if(d.length>0){d=d.substring(0,d.length-1)}return d};var a=b.manageAjax.create("ajaxQueue",{queue:true,preventDoubleRequests:false,abortPreviousRequests:true,maxRequests:1});mAjax=b.ajax;qAjax=function(d){a.add(d)};b.openWindow=function(e,d,f,j){var i=e+(e.indexOf("?")>=0?"&":"?")+"_t="+new Date().getTime();if(d){if(f<0){f=window.screen.availWidth*0.9}if(j<0){j=window.screen.availHeight*0.85}var h=(window.screen.availHeight-30-j)/2;var g=(window.screen.availWidth-10-f)/2;window.open(i,d,"height="+j+",innerHeight="+j+",width="+f+",innerWidth="+f+",top="+h+",left="+g+",toolbar=no,menubar=no,scrollbars=auto,resizeable=no,location=no,status=no")}else{window.open(i)}};b.fn.extend({getContextPath:function(){try{var d=b(this).closest("[base]");if(d!=null&&d.size()){return d.attr("base")||base}return base}catch(f){return base}},exists:function(){return b(this)&&b(this).size()>0},patchHeight:function(){return b(this).outerHeight(true)-b(this).height()},patchWidth:function(){return b(this).outerWidth(true)-b(this).width()},scrollHeight:function(){return b(this)[0].scrollHeight},center:function(g){var i=b(g||window);var e=i.height(),k=b(this).height(),f=(e-k)/2;var d=i.width(),h=b(this).width(),j=(d-h)/2;return b(this).css({top:(f>20?f/3:0),left:(j>20?j:0)})},showme:function(){return b(this).css({display:"block",visibility:"visible"})},hideme:function(){return b(this).css({display:"none",visibility:"hidden"})},sameHeight:function(e){var d=e||-1;if(d<0){b(this).each(function(){d=Math.max(b(this).height(),d)})}return b(this).css("min-height",d)},sameWidth:function(e){var d=e||-1;if(d<0){b(this).each(function(){d=Math.max(b(this).width(),d)})}return b(this).css("min-width",d)},alignFollow:function(w){var s=b(this);var o=w.position();var n=w.offsetParent();var d=n.scrollTop();var q=n.scrollLeft();var k=n.width();var l=n.height();var g=o.top+d;var j=o.left+q;var h=g+w.outerHeight(true);var t=j+w.outerWidth(true);var f=h;var i=j;var r=s.outerHeight(true);var e=s.outerWidth(true);var u=g-r;var v=t-e;s.css({top:f+r-d<l?f+"px":u+"px",left:i+e-q<k?i+"px":v+"px"})},cloneAttr:function(e){var d=this,f=["style","class"];b.each(f,function(g,h){d.attr(h,b(e).attr(h)||"")});return this},setChecked:function(d){if(b.isFunction(b.prop)){b(this).prop("checked",d)}else{b(this).attr("checked",d)}return this},getChecked:function(){if(b.isFunction(b.prop)){return b(this).prop("checked")}return b(this).attr("checked")},updateRegions:function(f,e,h,i){var d=b(this),g={};g=b.extend({url:f,dataType:"html",success:function(p,o,u){var r=u.getResponseHeader("content-type")||"";if(r.indexOf("json")>-1){d.trigger("ajaxError",[u,g]);return}var l=b(p),j=d;if(h&&h.length){for(var q=h.length-1;q>=0;q--){var k=h[q],s;if(b.type(k)=="string"){s=d.find(k)}else{s=b(k);k=s.selector}var n=l.filter(k);if(n.exists()){s.html(n.html())}}var t=l.filter("title");if(t.exists()){document.title=t.text()}j.append(l.filter("script"))}else{d.html(p)}if(i&&b.isFunction(i)){i.apply(d)}b(window).trigger("resize")}},e||{});mAjax(g)},updateContents:function(e,d,f){b(this)._privateProcessContents(e,d,f,false)},replaceContents:function(e,d,f){b(this)._privateProcessContents(e,d,f,true)},updateHtml:function(h,e,k){var n=b(this),f=b(h),g=[];f.each(function(){var q=b(this).attr("id"),o,p;if(b.isFunction(b.fn.prop)){o=b(this).prop("tagName");p=b(this).prop("type")}else{o=b(this).attr("tagName");p=b(this).attr("type")}if(o=="SCRIPT"){if(p==null||p==""||p.toLowerCase().indexOf("javascript")>=0){g.push(b(this))}else{g.unshift(b(this))}}else{if(q){var i=n.find("#"+q);if(i.exists()){if(e){n.find("#"+q).replaceWith(b(this))}else{n.find("#"+q).html(b(this).html()).attr("base",b(this).attr("base"))}}else{if(e){n.replaceWith(b(this))}else{n.html(b(this).html()).attr("base",b(this).attr("base"))}}}}});var l=f.filter("title");if(l.exists()){document.title=l.text()}for(var j=0;j<g.length;j++){var d=g[j].attr("id");if(d){n.find("#"+d).remove()}n.append(g[j])}if(k&&b.isFunction(k)){k.apply(n,[h])}},_privateProcessContents:function(f,e,i,g){var d=b(this),h={};h=b.extend({url:f,dataType:"html",success:function(l,j,n){var k=n.getResponseHeader("content-type")||"";if(k.indexOf("json")>-1){d.trigger("ajaxError",[n,h]);return}d.updateHtml(l,g,i);b(window).trigger("resize")}},e||{});mAjax(h)},bgiframe:(b.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(e){e=b.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},e);var f=function(g){return g&&g.constructor===Number?g+"px":g};var d='<iframe class="bgiframe" frameborder="0"tabindex="-1"src="'+e.src+'"style="display:block;position:absolute;z-index:-1;'+(e.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(e.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":f(e.top))+";left:"+(e.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":f(e.left))+";width:"+(e.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":f(e.width))+";height:"+(e.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":f(e.height))+';"/>';return this.each(function(){if(b(this).children("iframe.bgiframe").length===0){this.insertBefore(document.createElement(d),this.firstChild)}})}:function(){return this})})}(jQuery));JSON={useHasOwn:({}.hasOwnProperty?true:false),pad:function(a){return a<10?"0"+a:a},m:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},encodeString:function(a){if(/["\\\x00-\x1f]/.test(a)){return'"'+a.replace(/([\x00-\x1f\\"])/g,function(e,d){var f=m[d];if(f){return f}f=d.charCodeAt();return"\\u00"+Math.floor(f/16).toString(16)+(f%16).toString(16)})+'"'}return'"'+a+'"'},encodeArray:function(h){var e=["["],c=false,g,d=h.length,f;for(g=0;g<d;g+=1){f=h[g];switch(typeof f){case"undefined":case"function":case"unknown":break;default:if(c){e.push(",")}e.push(f===null?"null":this.encode(f));c=true}}e.push("]");return e.join("")},encodeDate:function(a){return'"'+a.getFullYear()+"-"+pad(a.getMonth()+1)+"-"+pad(a.getDate())+"T"+pad(a.getHours())+":"+pad(a.getMinutes())+":"+pad(a.getSeconds())+'"'},encode:function(h){if(typeof h=="undefined"||h===null){return"null"}else{if(h instanceof Array){return this.encodeArray(h)}else{if(h instanceof Date){return this.encodeDate(h)}else{if(typeof h=="string"){return this.encodeString(h)}else{if(typeof h=="number"){return isFinite(h)?String(h):"null"}else{if(typeof h=="boolean"){return String(h)}else{var f=this;var d=["{"],c,g,e;for(g in h){if(!this.useHasOwn||h.hasOwnProperty(g)){e=h[g];switch(typeof e){case"undefined":case"function":case"unknown":break;default:if(c){d.push(",")}d.push(f.encode(g),":",e===null?"null":f.encode(e));c=true}}}d.push("}");return d.join("")}}}}}}},decode:function(json){return eval("("+json+")")}};jQuery.expr[":"].focus=function(a){return a===document.activeElement&&(a.type||a.href)};var setTab=function(k,b){var j=k[0],g=k[1],f=b[0];$("#"+j).css("display","");$("#_"+j).addClass(f);for(var d=0;d<g.length;d++){var h=g[d];if(h!=j){$("#"+h).css("display","none");$("#_"+h).removeClass(f)}}};function mdifference(a,f,c,h,b){if(!h){h="id"}if(!b){b="name"}var g=[],d=[];function e(k){for(var j=0;j<c.length;j++){if(c[j][h]==k){return c[j][b]}}return"未知"}jQuery.grep(a,function(i){if(i!=""&&jQuery.inArray(i,f)==-1){d.push(e(i))}});jQuery.grep(f,function(i){if(i!=""&&jQuery.inArray(i,a)==-1){g.push(e(i))}});return{removed:g,added:d}};