/*!
 * lhgcore Dialog Plugin v3.5.1
 * Date : 2011-06-23 08:33:11
 * Copyright (c) 2009 - 2011 By Li Hui Gang
 */
(function(k){var j=window,l,p,d=(k.browser.msie&&k.browser.version<7)?true:false,f=d?'<iframe hideFocus="true" frameborder="0" src="about:blank" style="position:absolute;z-index:-1;width:100%;height:100%;top:0px;left:0px;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>':"",m=function(e){e=e||document;return e.compatMode=="CSS1Compat"?e.documentElement:e.body},c=function(){if(!p){p=65500}return ++p},b=function(){if("pageXOffset" in j){return{x:j.pageXOffset||0,y:j.pageYOffset||0}}else{var e=m(l);return{x:e.scrollLeft||0,y:e.scrollTop||0}}},n=function(){var e=m(l);return{w:e.clientWidth||0,h:e.clientHeight||0}},o=(function(){var t=document.getElementsByTagName("link"),s="",q=0,e=t.length,r=/macula-ui-.*(?:\.min)?\.css/i;for(;q<e;q++){if(r.test(t[q].href)){s=!!document.querySelector?t[q].href:t[q].getAttribute("href",4);break}}s=s.split("?")[0];return s.substr(0,s.lastIndexOf("/")+1)})(),i=(function(){var t=document.getElementsByTagName("script"),s="",q=0,e=t.length,r=/jquery\.lhgdialog(?:\.min)?\.js/i;for(;q<e;q++){if(r.test(t[q].src)){s=!!document.querySelector?t[q].src:t[q].getAttribute("src",4);break}}return s.split("?")})(),h=function(q){if(i[1]){var t=i[1].split("&"),r=0,e=t.length,s;for(;r<e;r++){s=t[r].split("=");if(q===s[0]){return s[1]}}}return null},a=h("s")||"default";while(j.parent&&j.parent!=j){try{if(j.parent.document.domain!=document.domain){break}}catch(g){break}j=j.parent}if((h("t")||"self")==="self"||j.document.getElementsByTagName("frameset").length>0){j=window}l=j.document;try{l.execCommand("BackgroundImageCache",false,true)}catch(g){}a=a.split(",");k.fn.fixie6png=function(){var s=k("*",this),q,t;for(var r=0,e=s.length;r<e;r++){q=k(s[r]).css("ie6png");t=o+q;if(q){s[r].style.backgroundImage="none";s[r].runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"',sizingMethod='scale')"}}};k.fn.dialog=function(q){var e=false;if(this[0]){if(options===true){return $(this).data("lhgdialog")}e=new k.dialog(q);this.bind("click",e.ShowDialog)}$(this).data("lhgdialog",e);return e};k.dialog=function(G){var u=this,M,C,F,q,e,v,U,B,E,R,s=function(){var S=m(l);k(R).css({width:Math.max(S.scrollWidth,S.clientWidth||0)-1+"px",height:Math.max(S.scrollHeight,S.clientHeight||0)-1+"px"})},r=k.extend({title:"lhgdialog \u5F39\u51FA\u7A97\u53E3",cover:false,titleBar:true,btnBar:true,xButton:true,maxBtn:true,minBtn:false,cancelBtn:true,width:400,height:300,id:"lhgdgId",link:false,html:null,page:null,parent:null,dgOnLoad:null,onXclick:null,onCancel:null,onMinSize:null,fixed:false,top:"center",left:"center",drag:true,skin:a[0],resize:true,autoSize:false,rang:false,timer:null,iconTitle:true,bgcolor:"#333333",opacity:0.4,args:null,autoPos:false,autoCloseFn:null,cancelBtnTxt:"\u53D6\u6D88",loadingText:"\u7A97\u53E3\u5185\u5BB9\u52A0\u8F7D\u4E2D\uFF0C\u8BF7\u7A0D\u7B49..."},G||{}),Q,P={},w=false,A,L=function(W){var V=W.style,S=m(l),Y=parseInt(V.left)-S.scrollLeft,X=parseInt(V.top)-S.scrollTop;V.removeExpression("left");V.removeExpression("top");V.setExpression("left","this.ownerDocument.documentElement.scrollLeft"+Y);V.setExpression("top","this.ownerDocument.documentElement.scrollTop + "+X)},K=function(){var S,V;if(r.html){if(typeof r.html==="string"){S='<div id="lhgdg_inbox_'+r.id+'" class="lhgdg_inbox_'+r.skin+'" style="display:none">'+r.html+"</div>"}else{S='<div id="lhgdg_inbox_'+r.id+'" class="lhgdg_inbox_'+r.skin+'" style="display:none"></div>'}}else{if(r.page){S='<iframe id="lhgfrm_'+r.id+'" frameborder="0" src="'+r.page+'" scrolling="auto" style="display:none;width:100%;height:100%;"></iframe>'}}V=['<div id="lhgdlg_',r.id,'" class="lhgdialog_',r.skin,'" style="width:',r.width,"px;height:",r.height,'px;">','<table border="0" cellspacing="0" cellpadding="0" width="100%">',"<tr>",'<td class="lhgdg_leftTop_',r.skin,'"></td>','<td id="lhgdg_drag_',r.id,'" class="lhgdg_top_',r.skin,'">',r.titleBar?('<div class="lhgdg_title_icon_'+r.skin+'">'+(r.iconTitle?'<div class="lhgdg_icon_'+r.skin+'"></div>':"")+'<div class="lhgdg_title_'+r.skin+'">'+r.title+"</div>"+(r.minBtn?('<a class="lhgdg_minbtn_'+r.skin+'" id="lhgdg_minbtn_'+r.id+'" href="javascript:void(0);" target="_self"></a>'):"")+(r.maxBtn?('<a class="lhgdg_maxbtn_'+r.skin+'" id="lhgdg_maxbtn_'+r.id+'" href="javascript:void(0);" target="_self"></a>'):"")+(r.xButton?('<a class="lhgdg_xbtn_'+r.skin+'" id="lhgdg_xbtn_'+r.id+'" href="javascript:void(0);" target="_self"></a>'):"")+"</div>"):"","</td>",'<td class="lhgdg_rightTop_',r.skin,'"></td>',"</tr>","<tr>",'<td class="lhgdg_left_',r.skin,'"></td>',"<td>",'<table border="0" cellspacing="0" cellpadding="0" width="100%">',"<tr>",'<td id="lhgdg_content_',r.id,'" style="background-color:#fff">',S,'<div id="lhgdg_load_',r.id,'" class="lhgdg_load_',r.skin,'"><span>',r.loadingText,"</span></div>","</td>","</tr>",r.btnBar?('<tr><td id="lhgdg_btnBar_'+r.id+'" class="lhgdg_btnBar_'+r.skin+'"><div class="lhgdg_btn_div_'+r.skin+'"></div></td></tr>'):"","</table>","</td>",'<td class="lhgdg_right_',r.skin,'"></td>',"</tr>","<tr>",'<td class="lhgdg_leftBottom_',r.skin,'"></td>','<td class="lhgdg_bottom_',r.skin,'"></td>','<td id="lhgdg_drop_',r.id,'" class="lhgdg_rightBottom_',r.skin,'"></td>',"</tr>","</table>",f,"</div>"].join("");return V},y=function(){R=k("#lhgdgCover"+r.id,l)[0];if(!R){var S='<div id="lhgdgCover'+r.id+'" style="position:absolute;top:0px;left:0px;background-color:'+r.bgcolor+';">'+f+"</div>";R=k(S,l).css("opacity",r.opacity).appendTo(l.body)[0]}k(j).bind("resize",s);s();k(R).css({display:"",zIndex:c()})},t=function(ag,ai,ab,ad){var aj=n(),aa=b(),ac=parseInt(ag.style.width,10),S=parseInt(ag.style.height,10),ah,af,W,V,Y,Z,ae,X;if(ad){W=d?aa.x:0;V=d?aj.w+aa.x-ac:aj.w-ac;Y=d?(V+aa.x-20)/2:(V-20)/2;Z=d?aa.y:0;ae=d?aj.h+aa.y-S:aj.h-S;X=d?(ae+aa.y-20)/2:(ae-20)/2}else{W=aa.x;Y=aa.x+(aj.w-ac-20)/2;V=aa.x+aj.w-ac;Z=aa.y;X=aa.y+(aj.h-S-20)/2;ae=aa.y+aj.h-S}switch(ab){case"center":ah=Y;break;case"left":ah=W;break;case"right":ah=V;break;default:if(ad&&d){ab=ab+aa.x}ah=ab;break}switch(ai){case"center":af=X;break;case"top":af=Z;break;case"bottom":af=ae;break;default:if(ad&&d){ai=ai+aa.y}af=ai;break}k(ag).css({top:af+"px",left:ah+"px"});if(ad&&d){L(ag)}},J=function(S){u.curWin=window;u.curDoc=document;k(S).bind("contextmenu",function(V){V.preventDefault()}).bind("mousedown",N);if(r.html&&r.html.nodeType){k(C).append(r.html);r.html.style.display=""}B=[window];if(j!=window){B.push(j)}if(r.page){u.dgFrm=k("#lhgfrm_"+r.id,l)[0];if(!r.link){u.dgWin=u.dgFrm.contentWindow;u.dgFrm.lhgDG=u}k(u.dgFrm).bind("load",function(){this.style.display="block";if(!r.link){var V=k.browser.msie?u.dgWin.document:u.dgWin;k(V).bind("mousedown",N);B.push(u.dgWin);u.dgDoc=u.dgWin.document;if(r.autoSize){D()}k.isFunction(r.dgOnLoad)&&r.dgOnLoad.call(u)}M.style.display="none"})}if(r.xButton&&r.titleBar){k(F).bind("click",function(){(r.onXclick||u.cancel).call(u)})}if(r.maxBtn&&r.titleBar){k(Q).bind("click",u.maxSize);k(q).bind("dblclick",u.maxSize)}if(r.minBtn&&r.titleBar&&k.isFunction(r.onMinSize)){k(A).bind("click",r.onMinSize)}},z=function(Y){var X=q.offsetHeight,S=e.offsetHeight,V=r.btnBar?U.offsetHeight:0,W=parseInt(Y.style.height,10)-X-S-V;M.style.lineHeight=W+"px";v.style.height=W+"px"},D=function(){var Y=q.offsetHeight,S=e.offsetHeight,X=r.btnBar?U.offsetHeight:0,Z=e.offsetWidth*2,V,aa,W;if(r.html){V=Math.max(C.scrollHeight,C.clientHeight||0);aa=Math.max(C.scrollWidth,C.clientWidth||0)}else{if(r.page&&!r.link){if(!u.dgDoc){return}W=m(u.dgDoc);V=Math.max(W.scrollHeight,W.clientHeight||0);aa=Math.max(W.scrollWidth,W.clientWidth||0)}}V=V+Y+S+X;aa=aa+Z;u.reDialogSize(aa,V);t(u.dg,"center","center",r.fixed)},O=function(Z){var ab,W,V,X,Y=B,ad,aa;function ac(af){var ae={x:af.screenX,y:af.screenY};X={x:X.x+(ae.x-ab.x),y:X.y+(ae.y-ab.y)};ab=ae;if(r.rang){if(X.x<aa.x){X.x=aa.x}if(X.y<aa.y){X.y=aa.y}if(X.x>W){X.x=W}if(X.y>V){X.y=V}}u.dg.style.top=r.fixed&&!d?X.y-aa.y+"px":X.y+"px";u.dg.style.left=r.fixed&&!d?X.x-aa.x+"px":X.x+"px"}function S(ag){for(var af=0,ae=Y.length;af<ae;af++){k(Y[af].document).unbind("mousemove",ac);k(Y[af].document).unbind("mouseup",S)}ab=null;Z=null;if(X.y<0){u.dg.style.top="0px"}if(r.fixed&&d){L(u.dg)}if(k.browser.msie){u.dg.releaseCapture()}}k(Z).bind("mousedown",function(aj){if(aj.target.id==="lhgdg_xbtn_"+r.id){return}ad=n();aa=b();var ae=u.dg.offsetLeft,ak=u.dg.offsetTop,ag=u.dg.clientWidth,ai=u.dg.clientHeight;X=r.fixed&&!d?{x:ae+aa.x,y:ak+aa.y}:{x:ae,y:ak};ab={x:aj.screenX,y:aj.screenY};W=ad.w+aa.x-ag;V=ad.h+aa.y-ai;u.dg.style.zIndex=parseInt(p,10)+1;for(var ah=0,af=Y.length;ah<af;ah++){k(Y[ah].document).bind("mousemove",ac);k(Y[ah].document).bind("mouseup",S)}aj.preventDefault();if(k.browser.msie){u.dg.setCapture()}})},I=function(Y){var aa,V,ab,W,X=B,ad,ae,Z;function ac(ag){var af={x:ag.screenX,y:ag.screenY};ad={w:af.x-aa.x,h:af.y-aa.y};if(ad.w<200){ad.w=200}if(ad.h<100){ad.h=100}u.dg.style.top=r.fixed?W.y-Z.y+"px":W.y+"px";u.dg.style.left=r.fixed?W.x-Z.x+"px":W.x+"px";u.reDialogSize(ad.w,ad.h)}function S(ah){for(var ag=0,af=X.length;ag<af;ag++){k(X[ag].document).unbind("mousemove",ac);k(X[ag].document).unbind("mouseup",S)}aa=null;Y=null;if(k.browser.msie){u.dg.releaseCapture()}}k(Y).bind("mousedown",function(ai){ab=u.dg.clientWidth;V=u.dg.clientHeight;ad={w:ab,h:V};ae=n();Z=b();var af=u.dg.offsetLeft,aj=u.dg.offsetTop;W=r.fixed?{x:af+Z.x,y:aj+Z.y}:{x:af,y:aj};aa={x:ai.screenX-ab,y:ai.screenY-V};u.dg.style.zIndex=parseInt(p,10)+1;for(var ah=0,ag=X.length;ah<ag;ah++){k(X[ah].document).bind("mousemove",ac);k(X[ah].document).bind("mouseup",S)}ai.preventDefault();if(k.browser.msie){u.dg.setCapture()}})},N=function(S){u.dg.style.zIndex=parseInt(p,10)+1;p=parseInt(u.dg.style.zIndex,10);S.stopPropagation()},T=function(){t(u.dg,r.autoPos.top,r.autoPos.left,r.fixed)},H=function(){if(k.isFunction(r.onCancel)){r.onCancel.call(u)}u.cancel()},x=function(){if(u.dgFrm){if(!r.link){k(u.dgFrm).unbind("load")}u.dgFrm.src="about:blank";u.dgFrm=null}if(r.html&&r.html.nodeType){k(u.curDoc).append(r.html);r.html.style.display="none"}if(r.autoPos){k(j).unbind("resize",T)}B=[];k(u.dg).remove();u.dg=null;w=false;P={};M=C=F=q=e=U=v=Q=A=null};u.ShowDialog=function(){if(k("#lhgdlg_"+r.id,l)[0]){return u}if(r.cover){y()}if(r.fixed){r.maxBtn=false;r.minBtn=false}var V=r.fixed&&!d?"fixed":"absolute",S=K();u.dg=k(S,l).css({position:V,zIndex:c()}).appendTo(l.body)[0];M=k("#lhgdg_load_"+r.id,l)[0];C=k("#lhgdg_inbox_"+r.id,l)[0];F=k("#lhgdg_xbtn_"+r.id,l)[0];q=k("#lhgdg_drag_"+r.id,l)[0];e=k("#lhgdg_drop_"+r.id,l)[0];U=k("#lhgdg_btnBar_"+r.id,l)[0];v=k("#lhgdg_content_"+r.id,l)[0];Q=k("#lhgdg_maxbtn_"+r.id,l)[0];A=k("#lhgdg_minbtn_"+r.id,l)[0];z(u.dg);t(u.dg,r.top,r.left,r.fixed);J(u.dg);if(r.drag){O(q)}else{q.style.cursor="default"}if(r.resize){I(e)}else{e.style.cursor="default"}if(d&&k(e).css("ie6png")){k(u.dg).fixie6png()}if(r.btnBar&&r.cancelBtn){u.addBtn("dgcancelBtn",r.cancelBtnTxt,H)}if(r.html){M.style.display="none";C.style.display="";if(r.autoSize){D()}}if(r.timer){u.closeTime(r.timer,r.autoCloseFn)}if(r.html&&k.isFunction(r.dgOnLoad)){r.dgOnLoad.call(u)}if(r.autoPos){k(j).bind("resize",T)}};u.updateContent=function(S){if(S&&typeof(S)!="boolean"){M.style.display="none";C.style.display="";if(r.autoSize){D()}$(C).html(S);$(C).unbind("closeDialog").bind("closeDialog",function(V){if(r.onXclick){r.onXclick.call(u)}else{u.cancel()}V.preventDefault();V.stopPropagation();return false})}};u.reDialogSize=function(V,S){k(u.dg).css({width:V+"px",height:S+"px"});z(u.dg)};u.maxSize=function(){var V,S;V=n();S=b();if(!w){P.dgW=u.dg.offsetWidth;P.dgH=u.dg.offsetHeight;P.dgT=u.dg.style.top;P.dgL=u.dg.style.left;k(u.dg).css({top:S.y+"px",left:S.x+"px"});u.reDialogSize(V.w,V.h);k(Q).addClass("lhgdg_rebtn_"+r.skin).removeClass("lhgdg_maxbtn_"+r.skin);if(r.drag){k(q).unbind("mousedown").css("cursor","default")}if(r.resize){k(e).unbind("mousedown").css("cursor","default")}w=true}else{u.reDialogSize(P.dgW,P.dgH);k(u.dg).css({top:P.dgT,left:P.dgL});k(Q).addClass("lhgdg_maxbtn_"+r.skin).removeClass("lhgdg_rebtn_"+r.skin);if(r.drag){O(q);q.style.cursor="move"}if(r.resize){I(e);e.style.cursor="nw-resize"}w=false}};u.SetMinBtn=function(S){if(r.minBtn&&r.titleBar){if(k.isFunction(S)){k(A).unbind("click").bind("click",S)}}};u.addBtn=function(Z,S,X,Y){Y=Y||"left";if(r.btnBar){if(k("#lhgdg_"+r.id+"_"+Z,l)[0]){k("#lhgdg_"+r.id+"_"+Z,l).html("<em>"+S+"</em>").unbind("click").bind("click",X)}else{var W='<a id="lhgdg_'+r.id+"_"+Z+'" class="lhgdg_button_'+r.skin+'" href="javascript:void(0);" target="_self"><em>'+S+"</em></a>",V=k(W,l).bind("click",X)[0];if(Y==="left"){k(".lhgdg_btn_div_"+r.skin,U).prepend(V)}else{k(".lhgdg_btn_div_"+r.skin,U).append(V)}}}};u.removeBtn=function(S){if(k("#lhgdg_"+r.id+"_"+S,l)[0]){k("#lhgdg_"+r.id+"_"+S,l).remove()}};u.SetIndex=function(){u.dg.style.zIndex=parseInt(p,10)+1;p=parseInt(u.dg.style.zIndex,10)};u.SetXbtn=function(S,V){if(r.xButton&&r.titleBar){if(k.isFunction(S)){k(F).unbind("click").bind("click",S)}if(V){F.style.display="none"}else{F.style.display=""}}};u.SetTitle=function(S){if(r.titleBar&&typeof S==="string"){k(".lhgdg_title_"+r.skin,u.dg).html(S)}};u.cancel=function(){x();if(R){if(r.parent&&r.parent.isCover){var S=r.parent.dg.style.zIndex;R.style.zIndex=parseInt(S,10)-1}else{R.style.display="none"}}};u.cleanDialog=function(){if(u.dg){x()}if(R){k(R).remove();R=null}};u.closeTime=function(S,V){if(E){clearTimeout(E)}if(k.isFunction(V)){V.call(u)}if(S){E=setTimeout(function(){u.cancel();clearTimeout(E)},1000*S)}};u.SetPosition=function(V,S){t(u.dg,S,V,r.fixed)};u.iWin=function(S){if(k("#lhgfrm_"+S,l)[0]){return k("#lhgfrm_"+S,l)[0].contentWindow}return null};u.iDoc=function(S){if(k("#lhgfrm_"+S,l)[0]){return k("#lhgfrm_"+S,l)[0].contentWindow.document}return null};u.iDG=function(S){return l.getElementById("lhgdlg_"+S)||null};u.SetCancelBtn=function(S,V){V=V||u.cancel;if(k("#lhgdg_"+r.id+"_dgcancelBtn",l)[0]){k("#lhgdg_"+r.id+"_dgcancelBtn",l).html("<em>"+S+"</em>").unbind("click").bind("click",V)}};u.setArgs=function(S){r.args=S};u.getArgs=function(){return r.args};u.dialogId=r.id;u.parent=r.parent;u.isCover=r.cover?true:false;k(window).bind("unload",u.cleanDialog)};k(function(){var e=setTimeout(function(){new k.dialog({id:"reLoadId",html:"lhgdialog",width:100,title:"reLoad",height:100,left:-9000,btnBar:false}).ShowDialog();clearTimeout(e)},150)})})(window.lhgcore||window.jQuery);